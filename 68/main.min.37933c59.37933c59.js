!function(){const e=document.getElementById("btnDelivery"),t=document.getElementById("btnPickup"),o=document.getElementById("regionRow"),i=document.getElementById("regionChipsInline"),n=document.getElementById("selectionSummary"),s="gf_delivery_address",l="gf_pickup_outlet";let d="delivery";function setMode(i){d=i,"delivery"===i?(e.classList.add("toggle-active"),e.classList.remove("toggle-idle"),t.classList.add("toggle-idle"),t.classList.remove("toggle-active"),o.classList.add("hidden")):(t.classList.add("toggle-active"),t.classList.remove("toggle-idle"),e.classList.add("toggle-idle"),e.classList.remove("toggle-active"),o.classList.remove("hidden")),updateSummary()}function updateSummary(){const e=JSON.parse(localStorage.getItem(s)||"null"),t=JSON.parse(localStorage.getItem(l)||"null");n.textContent="delivery"===d?e?`Deliver to: ${e.line1||e.city||"Saved address"}`:"No address set yet.":t?`Pickup: ${t.name} Â· ${t.region}`:"No outlet selected yet."}e.addEventListener("click",async()=>{const e=JSON.parse(localStorage.getItem(s)||"null")||void 0,t=await window.openPopup("set-your-address",{prefill:e});t&&(localStorage.setItem(s,JSON.stringify(t)),setMode("delivery"))}),t.addEventListener("click",async()=>{const e=await window.openPopup("select-your-outlet",{regions:window.REGIONS,outlets:window.OUTLETS});e&&(localStorage.setItem(l,JSON.stringify(e)),setMode("pickup"))}),setMode("delivery"),function buildInlineRegionChips(){i.innerHTML="",window.REGIONS.forEach(e=>{const t=document.createElement("button");t.type="button",t.className="px-3 py-1.5 rounded-full border text-sm bg-white hover:bg-gray-50",t.textContent=e,t.addEventListener("click",async()=>{const t=await window.openPopup("select-your-outlet",{regions:window.REGIONS,outlets:window.OUTLETS,region:e});t&&(localStorage.setItem(l,JSON.stringify(t)),setMode("pickup"))}),i.appendChild(t)})}(),updateSummary()}();