(async()=>{const $=(e,t=document)=>t.querySelector(e),e=$("#list"),t=$("#row"),n=$("#q"),o=$("#count");const a=await async function load(){const e=await fetch("../data/outlets.json",{cache:"no-store"});if(!e.ok)throw new Error("Fail fetch outlets.json");return e.json()}();let s=a.slice();function render(n){e.innerHTML="",n.forEach(n=>{const o=t.content.cloneNode(!0);$(".name",o).textContent=n.name,$(".address",o).textContent=n.address||"",$(".state",o).textContent=n.state?`Negeri: ${n.state}`:"",$(".hours",o).textContent=n.openHours?`Waktu: ${n.openHours}`:"",$("button",o).addEventListener("click",()=>{const e=new URL("/index.html",location.origin);e.searchParams.set("outlet",n.id),e.searchParams.set("outletName",n.name),location.href=e.toString()}),e.appendChild(o)}),o.textContent=`${n.length} cawangan dipaparkan`}n.addEventListener("input",()=>{s=function filter(e){if(!e)return a;const t=e.toLowerCase();return a.filter(e=>e.name&&e.name.toLowerCase().includes(t)||e.address&&e.address.toLowerCase().includes(t)||e.state&&e.state.toLowerCase().includes(t))}(n.value),render(s)}),render(s)})();